<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rob's Bagstore ‚Äî Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { background-color: #f8f9fa; }
    .cart-item {
      display: flex;
      align-items: center;
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }
    .cart-item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 15px;
    }
    .cart-item h6 { margin: 0; font-weight: 600; }
    .cart-item .price { color: #198754; font-weight: 700; }
    .cart-total {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: right;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-white fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="home.html">Rob's Bagstore</a>
      <div class="ms-auto d-flex align-items-center">
        <a href="products.html" class="btn btn-outline-primary me-2">üëú Shop</a>
        <a href="profile.html" class="btn btn-outline-secondary">üë§ Profile</a>
      </div>
    </div>
  </nav>

  <!-- Cart -->
  <main class="container" style="margin-top:90px;">
    <h3 class="mb-4">üõí Your Cart</h3>
    <div id="cartArea"></div>
    <div id="cartTotal" class="cart-total"></div>
    <div class="mt-4 text-end">
      <a class="btn btn-success" href="checkout.html">Proceed to Checkout</a>
    </div>
  </main>

  <footer class="text-center mt-5">
    ¬© <span id="year"></span> Rob's Bagstore
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Same product list as in products.html
    const PRODUCTS = [
      {"id":"p1","name":"Nomad Travel Backpack","category":"Backpack","price":2499,"discount":10,"img":"travel.jpg","desc":"Water-resistant 20L travel backpack."},
      {"id":"p2","name":"City Sling Bag","category":"Sling Bag","price":899,"discount":5,"img":"Slingbag.jpg","desc":"Compact sling for daily essentials."},
      {"id":"p3","name":"Classic Shoulder Tote","category":"Shoulder Bag","price":1599,"discount":15,"img":"shoulder.jpg","desc":"Elegant shoulder tote in faux leather."},
      {"id":"p4","name":"Urban Handbag","category":"Hand Bag","price":1199,"discount":20,"img":"handbag.jpg","desc":"Stylish handbag with inner pockets."},
      {"id":"p5","name":"Canvas Daypack","category":"Backpack","price":749,"discount":10,"img":"daypack.jpg","desc":"Lightweight canvas daypack for school."},
      {"id":"p6","name":"Crossbody Mini","category":"Sling Bag","price":649,"discount":8,"img":"crossbody.jpg","desc":"Small crossbody with adjustable strap."},
      {"id":"p7","name":"Executive Leather Satchel","category":"Shoulder Bag","price":3499,"discount":12,"img":"leather.jpg","desc":"Premium satchel for work and meetings."},
      {"id":"p8","name":"Weekend Carryall","category":"Hand Bag","price":2199,"discount":5,"img":"carryall.jpg","desc":"Spacious carryall for short trips."}
    ];

    function renderCart() {
      const cartArea = document.getElementById('cartArea');
      const cartTotal = document.getElementById('cartTotal');
      let cart = JSON.parse(localStorage.getItem('rb_cart') || '[]');
      
      if (cart.length === 0) {
        cartArea.innerHTML = `<p class="text-muted">Your cart is empty. <a href="products.html">Go shopping!</a></p>`;
        cartTotal.textContent = '';
        return;
      }

      let total = 0;
      cartArea.innerHTML = '';
      
      cart.forEach(id => {
        const p = PRODUCTS.find(x => x.id === id);
        if (!p) return;
        const discountedPrice = (p.price * (1 - p.discount / 100)).toFixed(0);
        total += Number(discountedPrice);

        const div = document.createElement('div');
        div.classList.add('cart-item');
        div.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="flex-grow-1">
            <h6>${p.name}</h6>
            <p class="mb-1 small text-muted">${p.desc}</p>
            <span class="price">‚Ç±${discountedPrice}</span>
          </div>
          <button class="btn btn-sm btn-outline-danger remove" data-id="${p.id}">üóëÔ∏è</button>
        `;
        cartArea.appendChild(div);
      });

      cartTotal.textContent = `Total: ‚Ç±${total.toLocaleString()}`;

      // Remove item
      document.querySelectorAll('.remove').forEach(btn => {
        btn.addEventListener('click', function(){
          const id = this.dataset.id;
          cart = cart.filter(x => x !== id);
          localStorage.setItem('rb_cart', JSON.stringify(cart));
          renderCart();
        });
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderCart();
      document.getElementById('year').textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>